(this.webpackJsonpnote_taking_app=this.webpackJsonpnote_taking_app||[]).push([[0],{16:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(1),a=n.n(o),r=n(17),s=n.n(r),i=(n(24),n.p,n(25),n(2)),u=n(10),j=n(3),l=Object(o.createContext)();function h(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(""),u=Object(i.a)(s,2),j=u[0],h=u[1],d=Object(o.useState)([]),b=Object(i.a)(d,2),p=b[0],O=b[1],f=Object(o.useContext)(l),x=Object(i.a)(f,2)[1];Object(o.useEffect)((function(){fetch("https://postgres-khai.herokuapp.com/users").then((function(e){return e.json()})).then((function(e){return O(e)}))}),[]);var g=[{type:"text",value:a,placeholder:"username",onChange:function(e){return r(e.target.value)}},{type:"password",value:j,placeholder:"password",onChange:function(e){return h(e.target.value)}}];return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p.map((function(e){e.username===a&&e.password===j&&x(e)}))},children:[g.map((function(e){return Object(c.jsx)("input",{type:e.type,value:e.value,placeholder:e.placeholder,onChange:e.onChange})})),Object(c.jsx)("button",{type:"submit",children:"Submit"})]})})}function d(e){var t=Object(o.useState)(),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(),u=Object(i.a)(s,2),j=u[0],l=u[1],h=[{placeholder:"Username",type:"text",value:a,onChange:function(e){return r(e.target.value)}},{placeholder:"Password",type:"password",value:j,onChange:function(e){return l(e.target.value)}}];return Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Use below to create new user"}),Object(c.jsxs)("form",{children:[h.map((function(e){return Object(c.jsx)("input",{placeholder:e.placeholder,type:e.type,value:e.value,onChange:e.onChange})})),Object(c.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),fetch("https://postgres-khai.herokuapp.com/users",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:j})}).then(alert("Create account!"))},children:"Create new account"})]})]})}function b(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Welcome to note taking app, login or sign up for private notes"}),Object(c.jsx)(h,{}),Object(c.jsx)(d,{})]})}function p(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(""),u=Object(i.a)(s,2),j=u[0],h=u[1],d=Object(o.useContext)(l),b=Object(i.a)(d,1)[0],p=[{placeholder:"Title",type:"text",onChange:function(e){return r(e.target.value)}},{placeholder:"Content",type:"text",onChange:function(e){return h(e.target.value)},rows:10,cols:50}];return Object(c.jsxs)("div",{className:"vertical-flex-container width-fit-content",children:[Object(c.jsx)("h2",{children:"Add new note"}),p.map((function(e){return Object(c.jsx)("textarea",{placeholder:e.placeholder,type:e.type,onChange:e.onChange})})),Object(c.jsx)("button",{onClick:function(){a&&j?fetch("https://postgres-khai.herokuapp.com/users/"+b.id+"/notes",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({title:a,content:j})}).then((function(e){return e.json()})).then((function(){alert("Added note!"),e.setNotesChange(!0)})):alert("Title or content cannot be left empty")},children:"Add note"})]})}function O(e){var t=Object(o.useState)(e.note.title),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(e.note.content),u=Object(i.a)(s,2),j=u[0],l=u[1],h=[{value:a,onChange:function(e){return r(e.target.value)}},{value:j,onChange:function(e){return l(e.target.value)},rows:10,cols:50}];return Object(c.jsxs)("div",{className:"vertical-flex-container margin-10",children:[h.map((function(e){return Object(c.jsx)("textarea",{className:"bg-yellow",value:e.value,onChange:e.onChange,rows:e.rows,cols:e.cols})})),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){fetch("https://postgres-khai.herokuapp.com/notes/"+e.note.id,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({title:a,content:j})}).then(alert("Note changed!"))},children:"Update"}),Object(c.jsx)("button",{onClick:function(){fetch("https://postgres-khai.herokuapp.com/notes/"+e.note.id,{method:"delete"}).then(e.setNotesChange(!0)).then(alert("Delete note!"))},children:"Delete"})]})]})}function f(e){var t=Object(o.useContext)(l),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)([]),u=Object(i.a)(s,2),j=u[0],h=u[1],d=Object(o.useState)(!1),b=Object(i.a)(d,2),f=b[0],x=b[1];return Object(o.useEffect)((function(){fetch("https://postgres-khai.herokuapp.com/users/"+a.id+"/notes").then((function(e){return e.json()})).then((function(e){return h(e)})).then(x(!1))}),[a.id,f]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{onClick:function(){return r()},children:"Log out"}),Object(c.jsx)(p,{setNotesChange:x}),Object(c.jsx)("div",{className:"container",children:j.map((function(e){return Object(c.jsx)(O,{note:e,setNotesChange:x})}))})]})}function x(e){var t=Object(o.useContext)(l),n=Object(i.a)(t,1)[0];return Object(c.jsxs)(u.a,{basename:"/note-taking-app",children:[Object(c.jsx)("nav",{children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(u.b,{to:"/",children:"Home"})}),Object(c.jsx)("li",{children:Object(c.jsx)(u.b,{to:"/dashboard",children:"Dashboard"})})]})}),Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/dashboard",children:n?Object(c.jsx)(f,{}):Object(c.jsx)(j.a,{to:"/"})}),Object(c.jsx)(j.b,{path:"/",children:n?Object(c.jsx)(j.a,{to:"/dashboard"}):Object(c.jsx)(b,{})})]})]})}function g(e){var t=Object(o.useState)(e.note.title),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(e.note.content),u=Object(i.a)(s,2),j=u[0],l=u[1],h=[{value:a,onChange:function(e){return r(e.target.value)}},{value:j,onChange:function(e){return l(e.target.value)},rows:10,cols:50}];return Object(c.jsxs)("div",{className:"vertical-flex-container margin-10",children:[h.map((function(e){return Object(c.jsx)("textarea",{className:"bg-yellow",value:e.value,onChange:e.onChange,rows:e.rows,cols:e.cols})})),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){fetch("https://fast-forest-86060.herokuapp.com/notes/"+e.note._id,{method:"PUT",headers:{"content-type":"application/json",Authorization:"Basic"+btoa("admin:password")},body:JSON.stringify({title:a,content:j})}).then(alert("Note changed!"))},children:"Update"}),Object(c.jsx)("button",{onClick:function(){window.confirm("Do you want to delete this note?")&&fetch("https://fast-forest-86060.herokuapp.com/notes/"+e.note._id,{method:"DELETE",headers:{"content-type":"application/json",Authorization:"Basic "+btoa("admin:password")}}).then((function(){e.setNoteChanged(!0)}))},children:"Delete"})]})]})}function v(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(""),u=Object(i.a)(s,2),j=u[0],l=u[1],h=[{placeholder:"Title",type:"text",onChange:function(e){return r(e.target.value)}},{placeholder:"Content",type:"text",onChange:function(e){return l(e.target.value)},rows:10,cols:50}];return Object(c.jsxs)("div",{className:"vertical-flex-container width-fit-content",children:[Object(c.jsx)("h2",{children:"Add new note"}),h.map((function(e){return Object(c.jsx)("textarea",{placeholder:e.placeholder,type:e.type,onChange:e.onChange})})),Object(c.jsx)("button",{onClick:function(){if(a&&j){for(var t=0;e.keys.has(t);)t++;fetch("https://fast-forest-86060.herokuapp.com/notes",{method:"POST",headers:{"content-type":"application/json",Authorization:"Basic "+btoa("admin:password")},body:JSON.stringify({_id:t,title:a,content:j})}).then((function(e){return e.json()})).then((function(){e.setAdd(!0)}))}else alert("Title or content cannot be left empty")},children:"Add note"})]})}function m(e){return Object(c.jsx)("h2",{children:"This is public note and everyone can modify"})}n(16);function C(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(new Set),s=Object(i.a)(r,2),u=s[0],j=s[1],l=Object(o.useState)(!1),h=Object(i.a)(l,2),d=h[0],b=h[1],p=Object(o.useState)(!1),O=Object(i.a)(p,2),f=O[0],x=O[1];return Object(o.useEffect)((function(){a([]),fetch("https://fast-forest-86060.herokuapp.com/notes",{headers:{"content-type":"application/json",Authorization:"Basic "+btoa("admin:password")}}).then((function(e){return e.json()})).then((function(e){a(e);var t=new Set(u);e.map((function(e){t.has(e._id)||t.add(e._id)})),j(t),b(!1),x(!1)}))}),[d,f]),Object(c.jsxs)("div",{className:"bg-primary",children:[Object(c.jsx)(m,{}),Object(c.jsx)(v,{keys:u,setAdd:b}),Object(c.jsx)("div",{className:"container",children:n.map((function(e){return Object(c.jsx)(g,{note:e,setNoteChanged:x})}))})]})}function y(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1];return Object(c.jsxs)(l.Provider,{value:[a,r],children:[Object(c.jsx)(x,{}),Object(c.jsx)(C,{})]})}var w=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(y,{})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root")),S()}},[[31,1,2]]]);
//# sourceMappingURL=main.00829bab.chunk.js.map